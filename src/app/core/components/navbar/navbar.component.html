<div class="ui top attached menu wrapper">
  <div class="ui container">
    <div class="left menu vertical center aligned">
      <img
        src="../../../../assets/logo.svg"
        alt=""
        class="right spaced logo"
        routerLink="/"
      />
    </div>
    <div class="right menu vertical center aligned desktop-menu">
      <a
        *ngFor="let menuItem of menuItems"
        routerLink="{{ menuItem.link }}"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: true }"
      >
        <i class="{{ menuItem.icon }} icon right spaced"></i>
        {{ menuItem.text }}
      </a>

      <ng-container *ngIf="(user$ | async) as user; else login">
        <div
          class="ui pointing dropdown vertical center aligned notification-dropdown"
          suiDropdown
        >
          <i class="material-icons">notifications</i>
          <div class="menu transition visible" suiDropdownMenu>
            <ng-container *ngIf="user.notifications; else emptyNofifications">
              <a
                class="item pad"
                *ngFor="let notification of user.notifications"
              >
                <div class="notification-icon">
                  <i class="material-icons">{{ getIcon(notification.type) }}</i>
                </div>
                <div class="column info">
                  <span class="date">
                    {{ notification.date.toDate() | date: 'medium' }}
                  </span>
                  <span class="message"> {{ notification.message }} </span>
                </div>
              </a>
            </ng-container>
            <ng-template #emptyNofifications>
              <p>You have no new notifications!</p>
            </ng-template>
          </div>
        </div>

        <div
          class="ui pointing dropdown avt vertical center aligned"
          suiDropdown
        >
          <img class="ui avatar image" src="{{ user.photoUrl }}" />
          <div class="menu menu-user" suiDropdownMenu>
            <a
              *ngFor="let menuItem of menuItemsUser"
              [routerLink]="menuItem.link(user)"
              class="item pad"
            >
              <i class="material-icons" *ngIf="menuItem.materialIcon">{{
                menuItem.icon
              }}</i>
              <i
                class="{{ menuItem.icon }} icon"
                *ngIf="!menuItem.materialIcon"
              ></i>
              <span>{{ menuItem.text }}</span>
            </a>
            <div class="ui divider"></div>
            <a class="item pad" (click)="signOut()">
              <i class="sign-out icon"></i> <span>Sign out</span>
            </a>
          </div>
        </div>
      </ng-container>
      <ng-template #login>
        <a routerLink="/login">
          <i class="sign-in icon right spaced"></i> Login
        </a>
      </ng-template>
    </div>
    <div class="right menu vertical center aligned mobile-menu">
      <i class="bars icon" (click)="openMobileMenu()"></i>
    </div>
  </div>
</div>
<app-navbar-mobile
  [menuItemsTop]="menuItems"
  [menuItemsBottom]="menuItemsUser"
  *ngIf="mobileMenuActive"
  (onClose)="closeMobileMenu()"
></app-navbar-mobile>
